/* src/styles/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Node Styles */
  .node-hello { @apply bg-blue-100 border-blue-300; }
  .node-products { @apply bg-green-100 border-green-300; }
  .node-great { @apply bg-yellow-100 border-yellow-300; }
  .node-more { @apply bg-purple-100 border-purple-300; }
  .node-later { @apply bg-red-100 border-red-300; }

  /* Common node styles */
  .dialogue-node {
    @apply p-4 border border-solid rounded-md shadow-md text-center min-w-[150px] transition-colors duration-200;
  }

  /* Enhanced Dark mode node styles with better colors */
  .dark .dialogue-node {
    @apply border-opacity-60 text-dark-text shadow-md;
  }
  
  .dark .node-hello { @apply bg-blue-900 border-blue-700 text-blue-100; }
  .dark .node-products { @apply bg-green-900 border-green-700 text-green-100; }
  .dark .node-great { @apply bg-yellow-900 border-yellow-700 text-yellow-100; }
  .dark .node-more { @apply bg-purple-900 border-purple-700 text-purple-100; }
  .dark .node-later { @apply bg-red-900 border-red-700 text-red-100; }

  /* App container */
  .app-container {
    @apply flex w-screen h-screen overflow-hidden; /* Prevent overall scroll */
  }

  /* Sidebar Styles */
  .sidebar {
     @apply w-64 h-full bg-gray-800 text-white p-4 flex flex-col overflow-y-auto shrink-0;
  }

  /* Main Content Area */
  .main-content {
    @apply flex-grow h-full relative; /* Takes remaining space */
  }

  /* Ensure React Flow takes full space within its container */
  .dialogue-flow-canvas {
    @apply w-full h-full transition-colors duration-300;
  }
  
  /* Enhanced dark mode for flow canvas */
  .dark .dialogue-flow-canvas {
    @apply bg-dark-bg;
  }
  
  /* Enhanced React Flow controls in dark mode */
  .dark .react-flow__controls {
    @apply bg-dark-surface border border-dark-border rounded-lg overflow-hidden shadow-lg;
  }
  
  .dark .react-flow__controls-button {
    @apply bg-dark-surface text-white border-dark-border hover:bg-dark-border;
  }
  
  /* Ensure SVG icons inside control buttons are white */
  .dark .react-flow__controls-button svg {
    @apply text-white fill-white stroke-white;
  }
  
  .dark .react-flow__minimap {
    @apply bg-dark-surface border border-dark-border rounded-lg overflow-hidden shadow-lg;
  }
  
  /* Make minimap nodes more visible in dark mode */
  .dark .react-flow__minimap-node {
    @apply fill-dark-accent stroke-dark-border;
  }
  
  .dark .react-flow__minimap-mask {
    @apply fill-dark-bg opacity-50;
  }
  
  .dark .react-flow__attribution {
    @apply text-dark-text bg-dark-panel px-2 py-1 rounded;
  }
  
  .dark .react-flow__background {
    @apply opacity-30;
  }
  
  /* Make edges more visible in dark mode */
  .dark .react-flow__edge-path {
    @apply stroke-dark-text stroke-[1.5px];
  }
  
  .dark .react-flow__edge.selected .react-flow__edge-path {
    @apply stroke-dark-accent stroke-2;
  }
  
  .dark .react-flow__edge.animated .react-flow__edge-path {
    @apply stroke-dark-accent;
  }
  
  .dark .react-flow__connection-path {
    @apply stroke-dark-accent stroke-[1.5px];
  }
  
  .dark .react-flow__handle {
    @apply bg-dark-accent border-dark-surface;
  }
  
  /* Selection styling in dark mode */
  .dark .react-flow__selection {
    @apply border border-dark-accent bg-dark-accent bg-opacity-10;
  }

  /* Header positioning */
  .header-container {
      @apply absolute top-0 left-0 z-10 p-4 m-4 bg-white bg-opacity-90 rounded-lg shadow-md;
  }
  
  /* Dark mode for header */
  .dark .header-container {
    @apply bg-dark-panel;
  }
  
  /* Dark mode for CardSidebar */
  .dark .card-sidebar {
    @apply bg-dark-surface border-dark-border shadow-xl;
  }
  
  .dark .card-sidebar-title {
    @apply text-blue-400;
  }
  
  .dark .card-item {
    @apply bg-dark-bg border-dark-border transition-colors hover:border-dark-accent;
  }
  
  .dark .card-text {
    @apply text-dark-text;
  }
  
  .dark .card-icon {
    @apply text-gray-400 hover:text-dark-accent;
  }
  
  /* Enhance handle visibility in dark mode */
  .dark .react-flow__handle {
    @apply bg-dark-accent border-dark-border hover:bg-blue-500 transition-colors;
  }
  
  .dark .react-flow__handle.connectable {
    @apply cursor-crosshair;
  }
  
  .dark .react-flow__handle.connecting {
    @apply bg-green-500;
  }
  
  .dark .react-flow__handle.valid {
    @apply bg-green-500;
  }
}

/* Ensure we have proper sizing */
html, body, #root {
  @apply w-full h-full m-0 p-0 box-border font-sans;
}

/* Custom CSS Variables for React Flow in dark mode */
.dark {
  --xy-edge-stroke-default: #e0e0e0;
  --xy-edge-stroke-width-default: 1.5;
  --xy-edge-stroke-selected-default: #3367d9;
  --xy-connectionline-stroke-default: #3367d9;
  --xy-connectionline-stroke-width-default: 1.5;
  --xy-attribution-background-color-default: rgba(45, 45, 45, 0.8);
  --xy-minimap-background-color-default: #2d2d2d;
  --xy-background-pattern-dots-color-default: #444444;
  --xy-background-pattern-line-color-default: #333333;
  --xy-background-pattern-cross-color-default: #333333;
  --xy-node-color-default: #e0e0e0;
  --xy-node-border-default: 1px solid #3d3d3d;
  --xy-node-background-color-default: #2d2d2d;
  --xy-node-boxshadow-hover-default: 0 1px 6px 1px rgba(0, 0, 0, 0.3);
  --xy-node-boxshadow-selected-default: 0 0 0 2px #3367d9;
  --xy-handle-background-color-default: #3367d9;
  --xy-handle-border-color-default: #2d2d2d;
  --xy-selection-background-color-default: rgba(51, 103, 217, 0.1);
  --xy-selection-border-default: 1px solid rgba(51, 103, 217, 0.8);
  --xy-controls-button-background-color-default: #2d2d2d;
  --xy-controls-button-background-color-hover-default: #3d3d3d;
  --xy-controls-button-color-default: #e0e0e0;
  --xy-controls-button-color-hover-default: #ffffff;
  --xy-controls-button-border-color-default: #3d3d3d;
  --xy-controls-box-shadow-default: 0 0 6px 1px rgba(0, 0, 0, 0.2);
}

/* Scrollbar styles for light mode */
.card-scrollbar::-webkit-scrollbar {
  width: 5px;
}

.card-scrollbar::-webkit-scrollbar-track {
  background-color: rgba(239, 246, 255, 0.6);
  border-radius: 8px;
}

.card-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(96, 165, 250, 0.6);
  border-radius: 8px;
}

.card-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(59, 130, 246, 0.8);
}

/* Dark mode scrollbar - removed background */
.dark .card-scrollbar::-webkit-scrollbar-track {
  background-color: transparent;
  border-radius: 8px;
}

.dark .card-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(96, 165, 250, 0.4);
}

/* Firefox scrollbar */
.card-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(96, 165, 250, 0.6) rgba(239, 246, 255, 0.6);
}

/* Firefox dark mode scrollbar - transparent track */
.dark .card-scrollbar {
  scrollbar-color: rgba(96, 165, 250, 0.4) transparent;
}